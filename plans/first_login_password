# Implementation Plan: First Login Password Update Flow

## Overview
This plan outlines the implementation of first login detection and password update functionality for the Millime mobile banking app.

## Architecture Diagram

```mermaid
flowchart TD
    A[User attempts login] --> B{Check login result}
    B -->|Success| C[Navigate to Dashboard]
    B -->|NOT_AUTHORIZED error| D{First login detection}
    D -->|First login detected| E[Navigate to Password Update Screen]
    D -->|Not first login| F[Show error message]
    E --> G[User enters new password]
    G --> H{Validate passwords match}
    H -->|Invalid| I[Show validation error]
    H -->|Valid| J[Call updatePassword API]
    J -->|Success| K[Navigate to Dashboard]
    J -->|Failure| L[Show error message]
```

## Implementation Steps

### Step 1: Add Translation Keys
**File**: `lib/localizationMillime/localization/fr_tn/fr_tn_translations.dart`

Add the following translation keys:

```dart
// First login password update translations
"key_first_login_title": "Première connexion",
"key_first_login_description": "Vous devez créer un nouveau mot de passe pour accéder à votre compte",
"key_new_password": "Nouveau mot de passe",
"key_confirm_password": "Confirmer le mot de passe",
"key_password_minimum_length": "Le mot de passe doit contenir au moins 8 caractères",
"key_passwords_not_match": "Les mots de passe ne correspondent pas",
"key_password_requirements": "Le mot de passe doit:\n- Contenir au moins 8 caractères\n- Contenir au moins une majuscule\n- Contenir au moins un chiffre\n- Contenir au moins un caractère spécial",
"key_password_updated_success": "Mot de passe mis à jour avec succès",
"key_password_update_failed": "Échec de la mise à jour du mot de passe",
"key_password_update_title": "Mettre à jour le mot de passe",
"key_first_login_error": "Erreur de première connexion",
```

### Step 2: Update AuthRepository - Detect First Login
**File**: `lib/core/repository/auth_repository.dart`

Modify the login method to parse server response for first login flags:

```dart
// Add after line 96 in the login method
} else if (response.statusCode == 401) {
  // Parse the response body for additional flags
  try {
    final errorBody = json.decode(response.body);
    final errorCode = errorBody['error'] ?? 'NOT_AUTHORIZED';
    final errorDescription = errorBody['error_description'] ?? 'Numéro de téléphone ou mot de passe incorrect';
    final isFirstLogin = errorBody['first_login'] ?? errorBody['isFirstLogin'] ?? false;
    
    if (isFirstLogin) {
      throw AuthException("FIRST_LOGIN", "Première connexion - mise à jour du mot de passe requise", 
        additionalData: {'phoneNumber': phoneNumber});
    }
    throw AuthException(errorCode, errorDescription);
  } catch (e) {
    if (e is AuthException) rethrow;
    throw AuthException("NOT_AUTHORIZED", "Numéro de téléphone ou mot de passe incorrect");
  }
}
```

### Step 3: Update AuthProvider - Handle First Login
**File**: `lib/core/provider/auth_provider.dart`

Add a new state variable for first login:

```dart
// Add to class fields (around line 20)
bool _isFirstLogin = false;
dynamic _firstLoginPhoneNumber;

// Add to getters
bool get isFirstLogin => _isFirstLogin;
dynamic get firstLoginPhoneNumber => _firstLoginPhoneNumber;
```

Add method to handle first login navigation:

```dart
/// Navigate to password update screen for first login
void navigateToPasswordUpdate(BuildContext context) {
  NavigatorService.pushNamed(AppRoutes.passwordUpdateScreen);
}

/// Handle first login detected from login response
bool _handleFirstLoginException(AuthException exception, String phoneNumber) {
  if (exception.code == "FIRST_LOGIN") {
    _isFirstLogin = true;
    _firstLoginPhoneNumber = phoneNumber;
    notifyListeners();
    return true;
  }
  return false;
}
```

### Step 4: Update LoginScreenProvider - Detect First Login
**File**: `lib/connection/login_screen/provider/login_screen_provider.dart`

Modify login method to handle first login exception:

```dart
// Modify the loginWithPassword method (around line 175)
Future<bool> loginWithPassword(BuildContext context) async {
  try {
    // ... existing validation code ...
    
    final success = await provider.loginWithPassword(context, _phoneNumber, _password);
    
    if (success) {
      clearForm();
      navigateToHome(context);
      return true;
    } else {
      // Check if this is a first login scenario
      final authProvider = authProvider;
      if (authProvider?.isFirstLogin == true) {
        // Navigate to password update screen
        NavigatorService.pushNamed(AppRoutes.passwordUpdateScreen);
        return true; // Return true to indicate successful handling
      }
      debugPrint('LoginScreenProvider: Login failed');
      return false;
    }
  } catch (e) {
    debugPrint('LoginScreenProvider: Login with password error: $e');
    if (e is AuthException && e.code == "FIRST_LOGIN") {
      // Handle first login exception
      final authProvider = authProvider;
      if (authProvider != null) {
        authProvider._handleFirstLoginException(e, _phoneNumber);
        NavigatorService.pushNamed(AppRoutes.passwordUpdateScreen);
        return true;
      }
    }
    updateErrorMessage('Erreur de connexion: ${e.toString()}');
    return false;
  }
}
```

### Step 5: Create Password Update Screen - Model
**File**: `lib/connection/password_update_screen/models/password_update_screen_model.dart`

```dart
// ignore_for_file: must_be_immutable
class PasswordUpdateScreenModel {
  PasswordUpdateScreenModel({
    this.newPasswordController,
    this.confirmPasswordController,
  }) {
    newPasswordController = newPasswordController ?? TextEditingController();
    confirmPasswordController = confirmPasswordController ?? TextEditingController();
  }

  TextEditingController? newPasswordController;
  TextEditingController? confirmPasswordController;
}
```

### Step 6: Create Password Update Screen - Provider
**File**: `lib/connection/password_update_screen/provider/password_update_provider.dart`

```dart
import 'package:flutter/material.dart';
import 'package:millime/core/provider/auth_provider.dart';
import 'package:millime/core/utils/navigator_service.dart';
import 'package:millime/routes/app_routes.dart';
import '../models/password_update_screen_model.dart';

class PasswordUpdateProvider extends ChangeNotifier {
  PasswordUpdateScreenModel passwordUpdateScreenModel = PasswordUpdateScreenModel();
  
  bool _isLoading = false;
  String? _errorMessage;
  bool _obscureNewPassword = true;
  bool _obscureConfirmPassword = true;
  
  // Validation state
  String? _newPasswordError;
  String? _confirmPasswordError;
  bool _hasMinLength = false;
  bool _hasUppercase = false;
  bool _hasDigit = false;
  bool _hasSpecialChar = false;
  
  // Getters
  bool get isLoading => _isLoading;
  String? get errorMessage => _errorMessage;
  bool get obscureNewPassword => _obscureNewPassword;
  bool get obscureConfirmPassword => _obscureConfirmPassword;
  String? get newPasswordError => _newPasswordError;
  String? get confirmPasswordError => _confirmPasswordError;
  bool get hasMinLength => _hasMinLength;
  bool get hasUppercase => _hasUppercase;
  bool get hasDigit => _hasDigit;
  bool get hasSpecialChar => _hasSpecialChar;
  bool get isFormValid => _validateForm();
  
  void initialize() {
    notifyListeners();
  }
  
  // Toggle password visibility
  void toggleNewPasswordVisibility() {
    _obscureNewPassword = !_obscureNewPassword;
    notifyListeners();
  }
  
  void toggleConfirmPasswordVisibility() {
    _obscureConfirmPassword = !_obscureConfirmPassword;
    notifyListeners();
  }
  
  // Validate new password
  void validateNewPassword(String value) {
    _hasMinLength = value.length >= 8;
    _hasUppercase = value.contains(RegExp(r'[A-Z]'));
    _hasDigit = value.contains(RegExp(r'[0-9]'));
    _hasSpecialChar = value.contains(RegExp(r'[!@#$%^&*(),.?":{}|<>]'));
    
    if (value.isEmpty) {
      _newPasswordError = 'Veuillez entrer un nouveau mot de passe';
    } else if (!_hasMinLength) {
      _newPasswordError = 'Le mot de passe doit contenir au moins 8 caractères';
    } else if (!_hasUppercase || !_hasDigit || !_hasSpecialChar) {
      _newPasswordError = null; // Don't show error, show requirements instead
    } else {
      _newPasswordError = null;
    }
    
    notifyListeners();
  }
  
  // Validate confirm password
  void validateConfirmPassword(String value) {
    final newPassword = passwordUpdateScreenModel.newPasswordController?.text ?? '';
    
    if (value.isEmpty) {
      _confirmPasswordError = 'Veuillez confirmer votre mot de passe';
    } else if (value != newPassword) {
      _confirmPasswordError = 'Les mots de passe ne correspondent pas';
    } else {
      _confirmPasswordError = null;
    }
    
    notifyListeners();
  }
  
  // Validate entire form
  bool _validateForm() {
    final newPassword = passwordUpdateScreenModel.newPasswordController?.text ?? '';
    final confirmPassword = passwordUpdateScreenModel.confirmPasswordController?.text ?? '';
    
    return newPassword.isNotEmpty &&
           confirmPassword.isNotEmpty &&
           _hasMinLength &&
           _hasUppercase &&
           _hasDigit &&
           _hasSpecialChar &&
           newPassword == confirmPassword;
  }
  
  // Clear errors
  void clearErrors() {
    _errorMessage = null;
    _newPasswordError = null;
    _confirmPasswordError = null;
    notifyListeners();
  }
  
  // Update password
  Future<bool> updatePassword(BuildContext context) async {
    final newPassword = passwordUpdateScreenModel.newPasswordController?.text ?? '';
    final confirmPassword = passwordUpdateScreenModel.confirmPasswordController?.text ?? '';
    
    // Client-side validation
    if (newPassword.isEmpty || confirmPassword.isEmpty) {
      _errorMessage = 'Veuillez remplir tous les champs';
      notifyListeners();
      return false;
    }
    
    if (newPassword != confirmPassword) {
      _errorMessage = 'Les mots de passe ne correspondent pas';
      notifyListeners();
      return false;
    }
    
    if (!_hasMinLength || !_hasUppercase || !_hasDigit || !_hasSpecialChar) {
      _errorMessage = 'Le mot de passe ne répond pas aux exigences';
      notifyListeners();
      return false;
    }
    
    try {
      _isLoading = true;
      _errorMessage = null;
      notifyListeners();
      
      // Get AuthProvider and update password
      final authProvider = AuthProvider();
      authProvider.initialize(backendServer);
      
      // For first login, use empty old password
      final success = await authProvider.updatePassword(
        '', // Empty old password for first login
        newPassword,
        confirmPassword,
      );
      
      if (success) {
        _isLoading = false;
        notifyListeners();
        
        // Show success message
        _buildSuccessMessage(context, 'Mot de passe mis à jour avec succès');
        
        // Navigate to main app screen
        NavigatorService.pushNamedAndRemoveUntil(AppRoutes.accountDashboardScreen);
        return true;
      } else {
        _errorMessage = authProvider.errorMessage ?? 'Échec de la mise à jour du mot de passe';
        _isLoading = false;
        notifyListeners();
        return false;
      }
    } catch (e) {
      _errorMessage = 'Erreur de connexion: ${e.toString()}';
      _isLoading = false;
      notifyListeners();
      return false;
    }
  }
  
  // Error and success message handling
  void _buildSuccessMessage(BuildContext context, String message, {bool isError = false}) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
        content: Text(message),
        backgroundColor: isError ? appTheme.errorColor : appTheme.successColor,
        duration: const Duration(seconds: 3),
      ),
    );
  }
  
  @override
  void dispose() {
    passwordUpdateScreenModel.newPasswordController?.dispose();
    passwordUpdateScreenModel.confirmPasswordController?.dispose();
    super.dispose();
  }
}
```

### Step 7: Create Password Update Screen - UI
**File**: `lib/connection/password_update_screen/password_update_screen.dart`

```dart
import 'package:flutter/material.dart';
import '../../core/app_export.dart';
import 'provider/password_update_provider.dart';
import 'models/password_update_screen_model.dart';
import '../../widgets/custom_text_form_field.dart';
import '../../widgets/custum_button.dart';
import 'package:millime/core/build_info.dart';

class PasswordUpdateScreen extends StatefulWidget {
  static Widget builder(BuildContext context) {
    return ChangeNotifierProvider<PasswordUpdateProvider>(
      create: (context) => PasswordUpdateProvider(),
      child: PasswordUpdateScreen(),
    );
  }

  @override
  State<PasswordUpdateScreen> createState() => _PasswordUpdateScreenState();
}

class _PasswordUpdateScreenState extends State<PasswordUpdateScreen> {
  final TextEditingController _newPasswordController = TextEditingController();
  final TextEditingController _confirmPasswordController = TextEditingController();
  
  bool _obscureNewPassword = true;
  bool _obscureConfirmPassword = true;
  
  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance.addPostFrameCallback((_) {
      final provider = context.read<PasswordUpdateProvider>();
      provider.initialize();
    });
  }

  @override
  void dispose() {
    _newPasswordController.dispose();
    _confirmPasswordController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: appTheme.backgroundColor,
      appBar: AppBar(
        backgroundColor: appTheme.backgroundColor,
        elevation: 0,
        leading: IconButton(
          icon: Icon(Icons.arrow_back, color: appTheme.onBackground),
          onPressed: () => Navigator.of(context).pop(),
        ),
        title: Text(
          'key_password_update_title'.tr,
          style: TextStyleHelper.instance.title18SemiBoldQuicksand.copyWith(
            color: appTheme.onBackground,
          ),
        ),
      ),
      body: SafeArea(
        child: Consumer<PasswordUpdateProvider>(
          builder: (context, provider, child) {
            return SingleChildScrollView(
              padding: EdgeInsets.symmetric(horizontal: 20.h),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.stretch,
                children: [
                  SizedBox(height: 20.h),
                  
                  // Description
                  Text(
                    'key_first_login_description'.tr,
                    style: TextStyleHelper.instance.body14RegularSyne.copyWith(
                      color: appTheme.onSurfaceVariant,
                    ),
                    textAlign: TextAlign.center,
                  ),
                  
                  SizedBox(height: 32.h),
                  
                  // New Password Field
                  _buildNewPasswordSection(provider),
                  
                  SizedBox(height: 16.h),
                  
                  // Password Requirements
                  _buildPasswordRequirements(provider),
                  
                  SizedBox(height: 16.h),
                  
                  // Confirm Password Field
                  _buildConfirmPasswordSection(provider),
                  
                  SizedBox(height: 24.h),
                  
                  // Error Message
                  if (provider.errorMessage != null)
                    _buildErrorMessage(provider),
                  
                  SizedBox(height: 24.h),
                  
                  // Update Button
                  _buildUpdateButton(provider),
                  
                  SizedBox(height: 20.h),
                ],
              ),
            );
          },
        ),
      ),
    );
  }
  
  /// Section Widget: New Password
  Widget _buildNewPasswordSection(PasswordUpdateProvider provider) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          'key_new_password'.tr,
          style: TextStyleHelper.instance.body14SemiBoldManrope.copyWith(
            color: appTheme.onSurface,
          ),
        ),
        SizedBox(height: 8.h),
        CustomTextFormField(
          controller: _newPasswordController,
          obscureText: _obscureNewPassword,
          textInputType: TextInputType.visiblePassword,
          hintText: 'key_enter_password'.tr,
          prefixConstraints: BoxConstraints(
            maxHeight: 56.h,
          ),
          prefix: Container(
            margin: EdgeInsets.only(left: 16.h, right: 12.h),
            child: Icon(
              Icons.lock_outline,
              color: appTheme.onSurfaceVariant,
              size: 20.h,
            ),
          ),
          contentPadding: EdgeInsets.only(
            top: 15.h,
            bottom: 15.h,
            left: 0.h,
            right: 15.h,
          ),
          filled: true,
          fillColor: appTheme.surfaceColor,
          validator: (value) {
            if (value == null || value.isEmpty) {
              return 'Veuillez entrer un nouveau mot de passe';
            }
            return null;
          },
          onChanged: (value) {
            provider.validateNewPassword(value);
          },
          suffix: IconButton(
            icon: Icon(
              _obscureNewPassword ? Icons.visibility_off : Icons.visibility,
              color: appTheme.onSurfaceVariant,
              size: 20.h,
            ),
            onPressed: () {
              setState(() {
                _obscureNewPassword = !_obscureNewPassword;
              });
            },
          ),
        ),
        if (provider.newPasswordError != null)
          Padding(
            padding: EdgeInsets.only(top: 4.h),
            child: Text(
              provider.newPasswordError!,
              style: TextStyleHelper.instance.body12RegularManrope.copyWith(
                color: appTheme.errorColor,
              ),
            ),
          ),
      ],
    );
  }
  
  /// Section Widget: Password Requirements
  Widget _buildPasswordRequirements(PasswordUpdateProvider provider) {
    return Container(
      padding: EdgeInsets.all(12.h),
      decoration: BoxDecoration(
        color: appTheme.surfaceColor,
        borderRadius: BorderRadius.circular(8.h),
        border: Border.all(
          color: appTheme.borderColor,
          width: 1.h,
        ),
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            'key_password_requirements'.tr.split('\n').first,
            style: TextStyleHelper.instance.body12SemiBoldManrope.copyWith(
              color: appTheme.onSurface,
            ),
          ),
          SizedBox(height: 8.h),
          _buildRequirementItem('key_mdp_8_char_min'.tr, provider.hasMinLength),
          _buildRequirementItem('key_mdp_1_char_maj'.tr, provider.hasUppercase),
          _buildRequirementItem('key_mdp_1_chiffre'.tr, provider.hasDigit),
          _buildRequirementItem('key_mdp_1_char_spec'.tr, provider.hasSpecialChar),
        ],
      ),
    );
  }
  
  Widget _buildRequirementItem(String text, bool isMet) {
    return Row(
      children: [
        Icon(
          isMet ? Icons.check_circle : Icons.radio_button_unchecked,
          color: isMet ? appTheme.successColor : appTheme.onSurfaceVariant,
          size: 16.h,
        ),
        SizedBox(width: 8.h),
        Expanded(
          child: Text(
            text,
            style: TextStyleHelper.instance.body12RegularManrope.copyWith(
              color: isMet ? appTheme.successColor : appTheme.onSurfaceVariant,
            ),
          ),
        ),
      ],
    );
  }
  
  /// Section Widget: Confirm Password
  Widget _buildConfirmPasswordSection(PasswordUpdateProvider provider) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          'key_confirm_password'.tr,
          style: TextStyleHelper.instance.body14SemiBoldManrope.copyWith(
            color: appTheme.onSurface,
          ),
        ),
        SizedBox(height: 8.h),
        CustomTextFormField(
          controller: _confirmPasswordController,
          obscureText: _obscureConfirmPassword,
          textInputType: TextInputType.visiblePassword,
          hintText: 'key_enter_password_again'.tr,
          prefixConstraints: BoxConstraints(
            maxHeight: 56.h,
          ),
          prefix: Container(
            margin: EdgeInsets.only(left: 16.h, right: 12.h),
            child: Icon(
              Icons.lock_outline,
              color: appTheme.onSurfaceVariant,
              size: 20.h,
            ),
          ),
          contentPadding: EdgeInsets.only(
            top: 15.h,
            bottom: 15.h,
            left: 0.h,
            right: 15.h,
          ),
          filled: true,
          fillColor: appTheme.surfaceColor,
          validator: (value) {
            if (value == null || value.isEmpty) {
              return 'Veuillez confirmer votre mot de passe';
            }
            return null;
          },
          onChanged: (value) {
            provider.validateConfirmPassword(value);
          },
          suffix: IconButton(
            icon: Icon(
              _obscureConfirmPassword ? Icons.visibility_off : Icons.visibility,
              color: appTheme.onSurfaceVariant,
              size: 20.h,
            ),
            onPressed: () {
              setState(() {
                _obscureConfirmPassword = !_obscureConfirmPassword;
              });
            },
          ),
        ),
        if (provider.confirmPasswordError != null)
          Padding(
            padding: EdgeInsets.only(top: 4.h),
            child: Text(
              provider.confirmPasswordError!,
              style: TextStyleHelper.instance.body12RegularManrope.copyWith(
                color: appTheme.errorColor,
              ),
            ),
          ),
      ],
    );
  }
  
  /// Section Widget: Error Message
  Widget _buildErrorMessage(PasswordUpdateProvider provider) {
    return Container(
      padding: EdgeInsets.all(15.h),
      decoration: BoxDecoration(
        color: appTheme.errorContainer,
        borderRadius: BorderRadius.circular(8.h),
        border: Border.all(
          color: appTheme.errorColor.withOpacity(0.5),
          width: 1.h,
        ),
      ),
      child: Row(
        children: [
          Icon(
            Icons.error_outline,
            color: appTheme.errorColor,
            size: 20.h,
          ),
          SizedBox(width: 8.h),
          Expanded(
            child: Text(
              provider.errorMessage!,
              style: TextStyleHelper.instance.body14RegularSyne.copyWith(
                color: appTheme.errorColor,
              ),
            ),
          ),
        ],
      ),
    );
  }
  
  /// Section Widget: Update Button
  Widget _buildUpdateButton(PasswordUpdateProvider provider) {
    final isDisabled = provider.isLoading || !provider.isFormValid;
    
    return CustomButton(
      text: provider.isLoading ? 'key_traitement_en_cours'.tr : 'key_mettre_jour'.tr,
      width: double.maxFinite,
      variant: CustomButtonVariant.filled,
      onPressed: isDisabled ? null : () => _performUpdate(provider),
    );
  }
  
  /// Perform password update
  void _performUpdate(PasswordUpdateProvider provider) async {
    final success = await provider.updatePassword(context);
    if (success) {
      // Navigation handled in provider
    }
  }
}
```

### Step 8: Add Route
**File**: `lib/routes/app_routes.dart`

Add the new route:

```dart
// Add to imports
import 'package:millime/connection/password_update_screen/password_update_screen.dart';

// Add to constants
static const String passwordUpdateScreen = '/password_update_screen';

// Add to routes map
passwordUpdateScreen: PasswordUpdateScreen.builder,
```

### Step 9: Update AuthException Class (if needed)
**File**: `lib/core/repository/auth_repository.dart` (or create new file if not exists)

Ensure AuthException supports additional data:

```dart
class AuthException implements Exception {
  final String code;
  final String message;
  final Map<String, dynamic>? additionalData;

  AuthException(this.code, this.message, {this.additionalData});

  @override
  String toString() => 'AuthException($code, $message)';
}
```

## Error Handling Strategy

1. **Network Errors**: Catch `SocketException` and `HttpException` and display "Erreur de connexion"
2. **Validation Errors**: Show field-specific error messages below each field
3. **Server Errors**: Display error message from server response
4. **First Login Detection**: Check for `FIRST_LOGIN` error code and redirect

## Security Considerations

1. Password requirements enforced client-side and server-side
2. Password fields use obscure text by default
3. No password logging or exposure in error messages
4. HTTPS for all API communications

## Testing Strategy

1. Test first login detection with mock server response
2. Test password validation (min length, uppercase, digit, special char)
3. Test password mismatch error
4. Test successful password update and navigation
5. Test error handling for network failures
6. Test translation switching

## Files to Create/Modify

### New Files
1. `lib/connection/password_update_screen/models/password_update_screen_model.dart`
2. `lib/connection/password_update_screen/provider/password_update_provider.dart`
3. `lib/connection/password_update_screen/password_update_screen.dart`

### Modified Files
1. `lib/core/repository/auth_repository.dart` - Add first login detection
2. `lib/core/provider/auth_provider.dart` - Add first login state
3. `lib/connection/login_screen/provider/login_screen_provider.dart` - Handle first login
4. `lib/routes/app_routes.dart` - Add new route
5. `lib/localizationMillime/localization/fr_tn/fr_tn_translations.dart` - Add translations
6. `lib/localizationMillime/localization/en_us/en_us_translations.dart` - Add English translations
7. `lib/localizationMillime/localization/ar_tn/ar_tn_translations.dart` - Add Arabic translations

## Summary

This implementation adds:
- First login detection when login returns `NOT_AUTHORIZED` error
- Dedicated password update screen with two password fields
- Comprehensive client-side validation with visual feedback
- Proper error handling and user-friendly messages
- Translation support for all UI text
- Navigation to main app screen on successful password update
